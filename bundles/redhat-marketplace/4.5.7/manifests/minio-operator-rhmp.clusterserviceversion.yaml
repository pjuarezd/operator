apiVersion: operators.coreos.com/v1alpha1
kind: ClusterServiceVersion
metadata:
  annotations:
    alm-examples: '[{"apiVersion":"minio.min.io/v2","kind":"Tenant","metadata":{"annotations":{"prometheus.io/path":"/minio/v2/metrics/cluster","prometheus.io/port":"9000","prometheus.io/scrape":"true"},"labels":{"app":"minio"},"name":"storage-lite","namespace":"tenant-lite"},"spec":{"certConfig":{},"configuration":{"name":"storage-configuration"},"env":[],"externalCaCertSecret":[],"externalCertSecret":[],"externalClientCertSecrets":[],"features":{"bucketDNS":false,"domains":{}},"image":"quay.io/minio/minio@sha256:7432b4bcdff3b0255aec760af10d34fb392988ca921248ca39b68beec46a7472","imagePullSecret":{},"log":{"affinity":{"nodeAffinity":{},"podAffinity":{},"podAntiAffinity":{}},"annotations":{},"audit":{"diskCapacityGB":1},"db":{"affinity":{"nodeAffinity":{},"podAffinity":{},"podAntiAffinity":{}},"annotations":{},"env":[],"image":"","initimage":"","labels":{},"nodeSelector":{},"resources":{},"securityContext":{"fsGroup":999,"runAsGroup":999,"runAsNonRoot":true,"runAsUser":999},"serviceAccountName":"","tolerations":[],"volumeClaimTemplate":{"metadata":{},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"storageClassName":"standard"}}},"env":[],"image":"","labels":{},"nodeSelector":{},"resources":{},"securityContext":{"fsGroup":1000,"runAsGroup":1000,"runAsNonRoot":true,"runAsUser":1000},"serviceAccountName":"","tolerations":[]},"mountPath":"/export","podManagementPolicy":"Parallel","pools":[{"containerSecurityContext":{"runAsGroup":1000,"runAsNonRoot":true,"runAsUser":1000},"name":"pool-0","servers":4,"volumeClaimTemplate":{"metadata":{"name":"data"},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"2Gi"}}}},"volumesPerServer":2}],"priorityClassName":"","prometheus":{"affinity":{"nodeAffinity":{},"podAffinity":{},"podAntiAffinity":{}},"annotations":{},"diskCapacityGB":1,"env":[],"image":"","initimage":"","labels":{},"nodeSelector":{},"resources":{},"securityContext":{"fsGroup":1000,"runAsGroup":1000,"runAsNonRoot":true,"runAsUser":1000},"serviceAccountName":"","sidecarimage":"","storageClassName":"standard"},"requestAutoCert":true,"serviceAccountName":"","serviceMetadata":{"consoleServiceAnnotations":{},"consoleServiceLabels":{},"minioServiceAnnotations":{},"minioServiceLabels":{}},"subPath":"","users":[{"name":"storage-user"}]}}]'
    capabilities: Basic Install
    operators.operatorframework.io/builder: operator-sdk-v1.22.2
    operators.operatorframework.io/project_layout: unknown
    marketplace.openshift.io/remote-workflow: https://marketplace.redhat.com/en-us/operators/minio-operator-rhmp/pricing?utm_source=openshift_console
    marketplace.openshift.io/support-workflow: https://marketplace.redhat.com/en-us/operators/minio-operator-rhmp/support?utm_source=openshift_console
  name: minio-operator-rhmp.v4.5.7
  namespace: placeholder
spec:
  apiservicedefinitions: {}
  customresourcedefinitions:
    owned:
      - kind: Tenant
        name: tenants.minio.min.io
        version: v1
      - kind: Tenant
        name: tenants.minio.min.io
        version: v2
  description: Minio Operator Rhmp description. TODO.
  displayName: Minio Operator Rhmp
  icon:
    - base64data: ""
      mediatype: ""
  install:
    spec:
      clusterPermissions:
        - rules:
            - apiGroups:
                - ""
              resources:
                - secrets
              verbs:
                - get
                - watch
                - create
                - list
                - patch
                - update
                - deletecollection
            - apiGroups:
                - ""
              resources:
                - namespaces
                - services
                - events
                - resourcequotas
                - nodes
              verbs:
                - get
                - watch
                - create
                - list
                - patch
            - apiGroups:
                - ""
              resources:
                - pods
              verbs:
                - get
                - watch
                - create
                - list
                - patch
                - delete
                - deletecollection
            - apiGroups:
                - ""
              resources:
                - persistentvolumeclaims
              verbs:
                - deletecollection
                - list
                - get
                - watch
                - update
            - apiGroups:
                - storage.k8s.io
              resources:
                - storageclasses
              verbs:
                - get
                - watch
                - create
                - list
                - patch
            - apiGroups:
                - apps
              resources:
                - statefulsets
                - deployments
              verbs:
                - get
                - create
                - list
                - patch
                - watch
                - update
                - delete
            - apiGroups:
                - batch
              resources:
                - jobs
              verbs:
                - get
                - create
                - list
                - patch
                - watch
                - update
                - delete
            - apiGroups:
                - certificates.k8s.io
              resources:
                - certificatesigningrequests
                - certificatesigningrequests/approval
                - certificatesigningrequests/status
              verbs:
                - update
                - create
                - get
                - delete
                - list
            - apiGroups:
                - minio.min.io
              resources:
                - '*'
              verbs:
                - '*'
            - apiGroups:
                - min.io
              resources:
                - '*'
              verbs:
                - '*'
            - apiGroups:
                - ""
              resources:
                - persistentvolumes
              verbs:
                - get
                - list
                - watch
                - create
                - delete
            - apiGroups:
                - ""
              resources:
                - persistentvolumeclaims
              verbs:
                - get
                - list
                - watch
                - update
            - apiGroups:
                - ""
              resources:
                - events
              verbs:
                - create
                - list
                - watch
                - update
                - patch
            - apiGroups:
                - snapshot.storage.k8s.io
              resources:
                - volumesnapshots
              verbs:
                - get
                - list
            - apiGroups:
                - snapshot.storage.k8s.io
              resources:
                - volumesnapshotcontents
              verbs:
                - get
                - list
            - apiGroups:
                - storage.k8s.io
              resources:
                - csinodes
              verbs:
                - get
                - list
                - watch
            - apiGroups:
                - storage.k8s.io
              resources:
                - volumeattachments
              verbs:
                - get
                - list
                - watch
            - apiGroups:
                - ""
              resources:
                - endpoints
              verbs:
                - get
                - list
                - watch
                - create
                - update
                - delete
            - apiGroups:
                - coordination.k8s.io
              resources:
                - leases
              verbs:
                - get
                - list
                - watch
                - create
                - update
                - delete
            - apiGroups:
                - direct.csi.min.io
              resources:
                - volumes
              verbs:
                - get
                - list
                - watch
                - create
                - update
                - delete
            - apiGroups:
                - apiextensions.k8s.io
              resources:
                - customresourcedefinitions
              verbs:
                - get
                - list
                - watch
                - create
                - update
                - delete
            - apiGroups:
                - direct.csi.min.io
              resources:
                - directcsidrives
                - directcsivolumes
              verbs:
                - get
                - list
                - watch
                - create
                - update
                - delete
            - apiGroups:
                - ""
              resources:
                - pod
                - pods/log
              verbs:
                - get
                - list
                - watch
          serviceAccountName: console-sa
        - rules:
            - apiGroups:
                - apiextensions.k8s.io
              resources:
                - customresourcedefinitions
              verbs:
                - get
                - update
            - apiGroups:
                - ""
              resources:
                - persistentvolumeclaims
              verbs:
                - get
                - update
                - list
            - apiGroups:
                - ""
              resources:
                - namespaces
                - nodes
              verbs:
                - get
                - watch
                - list
            - apiGroups:
                - ""
              resources:
                - pods
                - services
                - events
                - configmaps
              verbs:
                - get
                - watch
                - create
                - list
                - delete
                - deletecollection
                - update
                - patch
            - apiGroups:
                - ""
              resources:
                - secrets
              verbs:
                - get
                - watch
                - create
                - update
                - list
                - delete
                - deletecollection
            - apiGroups:
                - apps
              resources:
                - statefulsets
                - deployments
                - deployments/finalizers
              verbs:
                - get
                - create
                - list
                - patch
                - watch
                - update
                - delete
            - apiGroups:
                - batch
              resources:
                - jobs
              verbs:
                - get
                - create
                - list
                - patch
                - watch
                - update
                - delete
            - apiGroups:
                - certificates.k8s.io
              resources:
                - certificatesigningrequests
                - certificatesigningrequests/approval
                - certificatesigningrequests/status
              verbs:
                - update
                - create
                - get
                - delete
                - list
            - apiGroups:
                - certificates.k8s.io
              resourceNames:
                - kubernetes.io/legacy-unknown
                - kubernetes.io/kube-apiserver-client
                - kubernetes.io/kubelet-serving
                - beta.eks.amazonaws.com/app-serving
              resources:
                - signers
              verbs:
                - approve
                - sign
            - apiGroups:
                - minio.min.io
              resources:
                - '*'
              verbs:
                - '*'
            - apiGroups:
                - min.io
              resources:
                - '*'
              verbs:
                - '*'
            - apiGroups:
                - monitoring.coreos.com
              resources:
                - prometheuses
              verbs:
                - '*'
            - apiGroups:
                - coordination.k8s.io
              resources:
                - leases
              verbs:
                - get
                - update
                - create
          serviceAccountName: minio-operator
      deployments:
        - label:
            app.kubernetes.io/instance: minio-operator
            app.kubernetes.io/name: operator
          name: console
          spec:
            replicas: 1
            selector:
              matchLabels:
                app: console
            strategy: {}
            template:
              metadata:
                labels:
                  app: console
                  app.kubernetes.io/instance: minio-operator-console
                  app.kubernetes.io/name: operator
              spec:
                containers:
                  - args:
                      - server
                      - --certs-dir=/tmp/certs
                    env:
                      - name: CONSOLE_OPERATOR_MODE
                        value: "on"
                    image: minio/console:v0.22.3
                    imagePullPolicy: IfNotPresent
                    name: console
                    ports:
                      - containerPort: 9090
                        name: http
                      - containerPort: 9433
                        name: https
                    resources: {}
                    securityContext:
                      runAsNonRoot: true
                    volumeMounts:
                      - mountPath: /tmp/certs
                        name: tls-certificates
                serviceAccountName: console-sa
                volumes:
                  - name: tls-certificates
                    projected:
                      sources:
                        - secret:
                            items:
                              - key: public.crt
                                path: public.crt
                              - key: public.crt
                                path: CAs/public.crt
                              - key: private.key
                                path: private.key
                              - key: tls.crt
                                path: tls.crt
                              - key: tls.crt
                                path: CAs/tls.crt
                              - key: tls.key
                                path: tls.key
                            name: operator-console-tls
                            optional: true
        - label:
            app.kubernetes.io/instance: minio-operator
            app.kubernetes.io/name: operator
          name: minio-operator
          spec:
            replicas: 2
            selector:
              matchLabels:
                name: minio-operator
            strategy: {}
            template:
              metadata:
                labels:
                  app.kubernetes.io/instance: minio-operator
                  app.kubernetes.io/name: operator
                  name: minio-operator
              spec:
                affinity:
                  podAntiAffinity:
                    requiredDuringSchedulingIgnoredDuringExecution:
                      - labelSelector:
                          matchExpressions:
                            - key: name
                              operator: In
                              values:
                                - minio-operator
                        topologyKey: kubernetes.io/hostname
                containers:
                  - env:
                      - name: MINIO_CONSOLE_TLS_ENABLE
                        value: "off"
                    image: minio/operator:v4.5.6
                    imagePullPolicy: IfNotPresent
                    name: minio-operator
                    resources:
                      requests:
                        cpu: 200m
                        ephemeral-storage: 500Mi
                        memory: 256Mi
                    securityContext:
                      runAsNonRoot: true
                serviceAccountName: minio-operator
    strategy: deployment
  installModes:
    - supported: false
      type: OwnNamespace
    - supported: false
      type: SingleNamespace
    - supported: false
      type: MultiNamespace
    - supported: true
      type: AllNamespaces
  keywords:
    - minio-operator-rhmp
  links:
    - name: Minio Operator Rhmp
      url: https://minio-operator-rhmp.domain
  maintainers:
    - email: your@email.com
      name: Maintainer Name
  maturity: alpha
  provider:
    name: Provider Name
    url: https://your.domain
  version: 4.5.7
  webhookdefinitions:
    - admissionReviewVersions:
        - v1
        - v2
      containerPort: 4222
      conversionCRDs:
        - tenants.minio.min.io
      deploymentName: minio-operator
      generateName: ctenants.kb.io
      sideEffects: None
      targetPort: 0
      type: ConversionWebhook
      webhookPath: /webhook/v1/crd-conversion
